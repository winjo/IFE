!function(){var n=[];n[0]=[[1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1],[1,1,0,1,1,1,1,1,0,1,1],[1,1,0,1,1,1,1,1,0,1,1],[1,1,0,1,1,1,1,1,0,1,1],[1,1,0,0,0,0,0,0,0,1,1],[1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1]],n[1]=[[1,1,1,1,1,1,1,0,1,1,1],[1,1,1,1,1,1,1,0,1,1,1],[1,1,1,0,0,0,0,0,1,1,1],[1,1,0,1,1,1,1,1,1,1,1],[1,0,1,1,1,1,1,1,1,1,1],[1,0,1,1,0,0,0,0,0,1,0],[1,0,1,1,1,1,1,1,0,1,1],[1,1,0,1,1,1,1,1,0,1,1],[1,1,0,0,0,0,0,1,0,1,1],[1,1,1,1,1,1,0,1,0,1,1],[1,1,1,1,1,0,1,1,0,1,1],[1,1,1,1,0,1,1,1,0,1,1],[1,1,1,0,1,1,1,1,0,1,1],[1,1,1,1,1,1,1,1,0,1,1],[1,1,0,0,0,0,0,0,0,1,1],[1,1,0,1,1,1,1,1,1,1,1],[1,1,0,1,1,1,1,1,1,1,1],[1,1,0,1,1,1,1,1,1,1,1]],window.data=n}(),function(){var n=32,t=18,a=11,i=function(){var n,i,o,e,r=[],u=0,m=30;for(o=0;o<t;o++)for(r[o]=[],e=0;e<a;e++)r[o][e]=1;for(;u++<m;){for(n=~~(Math.random()*t),i=~~(Math.random()*a);n==flag.x&&i==flag.y||n==mario.x&&i==mario.y;)n=~~(Math.random()*t),i=~~(Math.random()*a);r[n][i]=0}return r},o={row:t,column:a,unit:n,data:data.shift(),update:function(){this.data=data.shift()||i()}};window.map=o}(),function(){var n,t,a,i=0,o=(map.column-1)/2,e=map.row-1,r=(map.column-1)/2,u=1,m=!0,f=!0,s={x:i,y:o,move:function(e){if(path["new"]){if(m&&f){if(n=path.value.shift(),!n)return void(path["new"]=!1);t=n.x-s.x>0?1:-1,a=n.y-s.y>0?1:-1}s.x+=e*u/map.unit*t,s.y+=e*u/map.unit*a,t>0&&s.x<n.x||t<0&&s.x>n.x?m=!1:(s.x=n.x,m=!0),a>0&&s.y<n.y||a<0&&s.y>n.y?f=!1:(s.y=n.y,f=!0),s.x==d.x&&s.y==d.y&&(s.x=i,s.y=o,map.update(),path["new"]=!1)}}},d={x:e,y:r};window.mario=s,window.flag=d}();var astar=function(n,t,a){function i(n,t){for(var a,i=[],e=!1,m=null;h.length>0;){if(m=h[0],m.x==t.x&&m.y==t.y){e=!0;break}for(var p=m.x-1,g=p+3;p<g;p++)for(var y=m.y-1,l=y+3;y<l;y++)p<0||p>=d||y<0||y>=w||p==m.x&&y==m.y||(a=p==m.x||y==m.y?f:s,o(p,y,m,t,a));c.push(h.shift()),h.sort(u)}return e&&r(i,m),i}function o(n,t,i,o,r){var u=new m(n,t,i);if(0===a[n][t])return void c.push(u);if(e(c,n,t)==-1){var f=e(h,n,t);f!=-1?i.g+r<h[f].g&&(h[f].parentNode=i,h[f].setG(r)):0!==a[n][i.y]&&0!==a[i.x][t]&&(u.setG(r),u.setH(o),h.push(u))}}function e(n,t,a){var i,o;for(i=0;i<n.length;i++)if(o=n[i],o.x==t&&o.y==a)return i;return-1}function r(n,t){null!==t.parentNode&&r(n,t.parentNode),n.push(t)}function u(n,t){return n.f-t.f}function m(n,t,a){this.x=n,this.y=t,this.parentNode=a,this.g=0,this.h=0,this.f=0,"function"!=typeof m.prototype.setG&&(m.prototype.setG=function(n){this.g=(this.parentNode||{g:0}).g+n,this.f=this.g+this.h},m.prototype.setH=function(n){this.h=Math.abs(this.x-n.x)*f+Math.abs(this.y-n.y)*f,this.f=this.g+this.h})}var f=10,s=14,d=window.map.row,w=window.map.column,h=[],c=[],p=[],g=n[0],y=n[1],l=t[0],x=t[1];if(g<0||g>=d||y<0||y>=w||l<0||l>=d||x<0||x>=w)return p;if(0===a[g][y]||0===a[l][x])return p;var v=new m(g,y,null),q=new m(l,x,null);return h.push(v),p=i(v,q)};!function(){var n={"new":!1,value:[]};document.addEventListener("click",function(t){if("game"==t.target.id){var a=~~(t.clientY/map.unit),i=~~(t.clientX/map.unit);n["new"]=!0;var o=[~~(mario.x+.5),~~(mario.y+.5)],e=[a,i];n.value=astar(o,e,map.data)}}),window.path=n}(),function(){var n=document.getElementById("game"),t=n.getContext("2d"),a=new Image,i=new Image,o=new Image,e=!1,r=!1,u=!1;a.onload=function(){e=!0},i.onload=function(){r=!0},o.onload=function(){u=!0},a.src="images/block.png",i.src="images/mario.png",o.src="images/flag.png";var m=function(){e&&r&&u&&(window.render=function(e){t.clearRect(0,0,n.width,n.height),e.forEach(function(n,i){n.forEach(function(n,o){e[i][o]||t.drawImage(a,o*map.unit,i*map.unit)})}),t.drawImage(i,mario.y*map.unit,mario.x*map.unit),t.drawImage(o,flag.y*map.unit,flag.x*map.unit)})};window.render=m}(),function(){!function(){var n=62.5,t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){setTimeout(t,n)};window.requestAnimationFrame=t}();var n,t,a,i=function(){n=Date.now(),a=n-t,mario.move(a),render(map.data),t=n,requestAnimationFrame(i)};t=Date.now(),i()}();